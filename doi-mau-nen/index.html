<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Đổi màu nền thành trắng - ND Labs</title>
</head>
<body>
<input type="file" id="fileInput" accept="image/png,image/jpeg"><br><br>
<canvas id="canvas"></canvas><br>
<button id="downloadBtn">Tải ảnh</button>

<script>
const fileInput = document.getElementById("fileInput");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const downloadBtn = document.getElementById("downloadBtn");

fileInput.onchange = async (e) => {
  const file = e.target.files[0];
  if (!file) return;

  const img = new Image();
  img.src = URL.createObjectURL(file);

  img.onload = () => {
    canvas.width = img.width;
    canvas.height = img.height;
    ctx.drawImage(img, 0, 0);

    let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    let data = imgData.data;

    const threshold = 80; // chỉnh cao/thấp tùy ảnh

    for (let i = 0; i < data.length; i += 4) {
      const r = data[i];
      const g = data[i + 1];
      const b = data[i + 2];
      const brightness = (r + g + b) / 3;

      if (brightness < threshold) {
        data[i] = 255;
        data[i + 1] = 255;
        data[i + 2] = 255;
      }
    }

    ctx.putImageData(imgData, 0, 0);
  };
};

downloadBtn.onclick = () => {
  const a = document.createElement("a");
  a.href = canvas.toDataURL("image/png");
  a.download = "converted.png";
  a.click();
};
</script>
    <!-- Đặt ở cuối body -->
  <div class="home-wrapper">
    <!-- Nút Trang Chủ -->
    <a href="https://nd-site.github.io" class="home-btn">
      <img src="/homebtn.png" alt="Trang chủ">
    </a>

    <style>
      .home-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 55px;
        height: 55px;
        background: #fff;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        cursor: pointer;
        z-index: 9999;
        animation: float 3s ease-in-out infinite;
        text-decoration: none;
      }
      .home-btn img {
        max-width: 60%;
        max-height: 60%;
        object-fit: contain;
      }
      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-6px); }
      }
      .home-btn:hover {
        transform: scale(1.05);
        transition: 0.3s;
      }
    </style>
  </div>
</body>
</html>
